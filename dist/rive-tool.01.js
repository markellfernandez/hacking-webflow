(()=>{var Ln=Object.create;var on=Object.defineProperty;var On=Object.getOwnPropertyDescriptor;var xn=Object.getOwnPropertyNames;var Fn=Object.getPrototypeOf,In=Object.prototype.hasOwnProperty;var Wn=(Z,V)=>()=>(V||Z((V={exports:{}}).exports,V),V.exports);var jn=(Z,V,Y,Dt)=>{if(V&&typeof V=="object"||typeof V=="function")for(let N of xn(V))!In.call(Z,N)&&N!==Y&&on(Z,N,{get:()=>V[N],enumerable:!(Dt=On(V,N))||Dt.enumerable});return Z};var kn=(Z,V,Y)=>(Y=Z!=null?Ln(Fn(Z)):{},jn(V||!Z||!Z.__esModule?on(Y,"default",{value:Z,enumerable:!0}):Y,Z));var sn=Wn((ne,Le)=>{(function(V,Y){typeof ne=="object"&&typeof Le=="object"?Le.exports=Y():typeof define=="function"&&define.amd?define([],Y):typeof ne=="object"?ne.rive=Y():V.rive=Y()})(ne,function(){return(()=>{"use strict";var Z=[,(N,K,J)=>{J.r(K),J.d(K,{default:()=>rt});var Lt=(()=>{var it=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(M){M=M||{};var h;h||(h=typeof M<"u"?M:{});var pt,It;h.ready=new Promise(function(e,t){pt=e,It=t});function mt(){function e(f){let c=i;r=t=0,i=new Map,c.forEach(d=>{try{d(f)}catch(l){console.error(l)}}),this.La(),s&&s.fb()}let t=0,r=0,i=new Map,s=null,u=null;this.requestAnimationFrame=function(f){t||(t=requestAnimationFrame(e.bind(this)));let c=++r;return i.set(c,f),c},this.cancelAnimationFrame=function(f){i.delete(f),t&&i.size==0&&(cancelAnimationFrame(t),t=0)},this.cb=function(f){u&&(document.body.remove(u),u=null),f||(u=document.createElement("div"),u.style.backgroundColor="black",u.style.position="fixed",u.style.right=0,u.style.top=0,u.style.color="white",u.style.padding="4px",u.innerHTML="RIVE FPS",f=function(c){u.innerHTML="RIVE FPS "+c.toFixed(1)},document.body.appendChild(u)),s=new function(){let c=0,d=0;this.fb=function(){var l=performance.now();d?(++c,l-=d,1e3<l&&(f(1e3*c/l),c=d=0)):(d=l,c=0)}}},this.$a=function(){u&&(document.body.remove(u),u=null),s=null},this.La=function(){}}function yt(e){console.assert(!0);let t=new Map,r=-1/0;this.push=function(i){return i=i+((1<<e)-1)>>e,t.has(i)&&clearTimeout(t.get(i)),t.set(i,setTimeout(function(){t.delete(i),t.length==0?r=-1/0:i==r&&(r=Math.max(...t.keys()),console.assert(r<i))},1e3)),r=Math.max(i,r),r<<e}}let nt=new function(){function e(){if(!t){let D=function(Q,E,x){if(E=g.createShader(E),g.shaderSource(E,x),g.compileShader(E),x=g.getShaderInfoLog(E),0<x.length)throw x;g.attachShader(Q,E)};var P=document.createElement("canvas"),R={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let g=P.getContext("webgl2",R);if(g)r=2;else if(g=P.getContext("webgl",R))r=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(i=Math.min(g.getParameter(g.MAX_RENDERBUFFER_SIZE),g.getParameter(g.MAX_TEXTURE_SIZE)),P=g.createProgram(),D(P,g.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),D(P,g.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),g.bindAttribLocation(P,0,"vertex"),g.bindAttribLocation(P,1,"uv"),g.linkProgram(P),R=g.getProgramInfoLog(P),0<R.length)throw R;s=g.getUniformLocation(P,"mat"),u=g.getUniformLocation(P,"translate"),g.useProgram(P),g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer()),g.enableVertexAttribArray(0),g.enableVertexAttribArray(1),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,g.createBuffer()),g.uniform1i(g.getUniformLocation(P,"image"),0),g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=g}return!0}let t=null,r=0,i=0,s=null,u=null,f=0,c=0;this.ob=function(){return e(),i},this.Ya=function(P){if(!e())return null;let R=t.createTexture();return t.bindTexture(t.TEXTURE_2D,R),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),r==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),R};let d=new yt(8),l=new yt(8),v=new yt(10),T=new yt(10);this.bb=function(P,R,g,D,Q){if(e()){var E=d.push(P),x=l.push(R);(t.canvas.width!=E||t.canvas.height!=x)&&(t.canvas.width=E,t.canvas.height=x),t.viewport(0,x-R,P,R),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),g.sort((O,Ft)=>Ft.Oa-O.Oa),E=v.push(D),f!=E&&(t.bufferData(t.ARRAY_BUFFER,8*E,t.DYNAMIC_DRAW),f=E),E=0;for(var q of g)t.bufferSubData(t.ARRAY_BUFFER,E,q.Aa),E+=4*q.Aa.length;console.assert(E==4*D);for(var ct of g)t.bufferSubData(t.ARRAY_BUFFER,E,ct.Ra),E+=4*ct.Ra.length;console.assert(E==8*D),E=T.push(Q),c!=E&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*E,t.DYNAMIC_DRAW),c=E),q=0;for(var St of g)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,q,St.indices),q+=2*St.indices.length;console.assert(q==2*Q),St=0,ct=!0,E=q=0;for(let O of g){O.image.va!=St&&(t.bindTexture(t.TEXTURE_2D,O.image.Va||null),St=O.image.va),O.rb?(t.scissor(O.Ea,x-O.Fa-O.Ka,O.yb,O.Ka),ct=!0):ct&&(t.scissor(0,x-R,P,R),ct=!1),g=2/P;let Ft=-2/R;t.uniform4f(s,O.la[0]*g*O.ra,O.la[1]*Ft*O.sa,O.la[2]*g*O.ra,O.la[3]*Ft*O.sa),t.uniform2f(u,O.la[4]*g*O.ra+g*(O.Ea-O.pb*O.ra)-1,O.la[5]*Ft*O.sa+Ft*(O.Fa-O.qb*O.sa)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,E),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,E+4*D),t.drawElements(t.TRIANGLES,O.indices.length,t.UNSIGNED_SHORT,q),E+=4*O.Aa.length,q+=2*O.indices.length}console.assert(E==4*D),console.assert(q==2*Q)}},this.canvas=function(){return e()&&t.canvas}};M.onRuntimeInitialized=function(){function e(m){switch(m){case l.srcOver:return"source-over";case l.screen:return"screen";case l.overlay:return"overlay";case l.darken:return"darken";case l.lighten:return"lighten";case l.colorDodge:return"color-dodge";case l.colorBurn:return"color-burn";case l.hardLight:return"hard-light";case l.softLight:return"soft-light";case l.difference:return"difference";case l.exclusion:return"exclusion";case l.multiply:return"multiply";case l.hue:return"hue";case l.saturation:return"saturation";case l.color:return"color";case l.luminosity:return"luminosity"}}function t(m){return"rgba("+((16711680&m)>>>16)+","+((65280&m)>>>8)+","+((255&m)>>>0)+","+((4278190080&m)>>>24)/255+")"}function r(){0<q.length&&(nt.bb(x.drawWidth(),x.drawHeight(),q,ct,St),q=[],St=ct=0,x.reset(512,512));for(let m of E){for(let C of m.da)C();m.da=[]}E.clear()}var i=M.RenderPaintStyle;let s=M.RenderPath,u=M.RenderPaint,f=M.Renderer,c=M.StrokeCap,d=M.StrokeJoin,l=M.BlendMode,v=i.fill,T=i.stroke,P=M.FillRule.evenOdd,R=1;var g=M.RenderImage.extend("CanvasRenderImage",{__construct:function(){this.__parent.__construct.call(this),this.va=R,R=R+1&2147483647||1},decode:function(m){let C=Se;C.total++;var X=this,W=new Image;W.src=URL.createObjectURL(new Blob([m],{type:"image/png"})),W.onload=function(){if(X.Ta=W,X.Va=nt.Ya(W),X.size(W.width,W.height),C.loaded++,C.loaded===C.total){let B=C.ready;B&&(B(),C.ready=null)}}}}),D=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.ga=new Path2D},reset:function(){this.ga=new Path2D},addPath:function(m,C,X,W,B,H,F){var k=this.ga,dt=k.addPath;m=m.ga;let tt=new DOMMatrix;tt.a=C,tt.b=X,tt.c=W,tt.d=B,tt.e=H,tt.f=F,dt.call(k,m,tt)},fillRule:function(m){this.Ca=m},moveTo:function(m,C){this.ga.moveTo(m,C)},lineTo:function(m,C){this.ga.lineTo(m,C)},cubicTo:function(m,C,X,W,B,H){this.ga.bezierCurveTo(m,C,X,W,B,H)},close:function(){this.ga.closePath()}}),Q=u.extend("CanvasRenderPaint",{color:function(m){this.Da=t(m)},thickness:function(m){this.Wa=m},join:function(m){switch(m){case d.miter:this.ua="miter";break;case d.round:this.ua="round";break;case d.bevel:this.ua="bevel"}},cap:function(m){switch(m){case c.butt:this.ta="butt";break;case c.round:this.ta="round";break;case c.square:this.ta="square"}},style:function(m){this.Ua=m},blendMode:function(m){this.Sa=e(m)},linearGradient:function(m,C,X,W){this.oa={Pa:m,Qa:C,Ha:X,Ia:W,za:[]}},radialGradient:function(m,C,X,W){this.oa={Pa:m,Qa:C,Ha:X,Ia:W,za:[],mb:!0}},addStop:function(m,C){this.oa.za.push({color:m,stop:C})},completeGradient:function(){},draw:function(m,C,X){let W=this.Ua;var B=this.Da,H=this.oa;if(m.globalCompositeOperation=this.Sa,H!=null){B=H.Pa;var F=H.Qa;let dt=H.Ha;var k=H.Ia;let tt=H.za;H.mb?(H=dt-B,k-=F,B=m.createRadialGradient(B,F,0,B,F,Math.sqrt(H*H+k*k))):B=m.createLinearGradient(B,F,dt,k);for(let Tt=0,et=tt.length;Tt<et;Tt++)F=tt[Tt],B.addColorStop(F.stop,t(F.color));this.Da=B,this.oa=null}switch(W){case T:m.strokeStyle=B,m.lineWidth=this.Wa,m.lineCap=this.ta,m.lineJoin=this.ua,m.stroke(C);break;case v:m.fillStyle=B,m.fill(C,X)}}});let E=new Set,x=null,q=[],ct=0,St=0;var O=M.CanvasRenderer=f.extend("Renderer",{__construct:function(m){this.__parent.__construct.call(this),this.fa=[1,0,0,1,0,0],this.Z=m.getContext("2d"),this.Ba=m,this.da=[]},save:function(){this.fa.push(...this.fa.slice(this.fa.length-6)),this.da.push(this.Z.save.bind(this.Z))},restore:function(){let m=this.fa.length-6;if(6>m)throw"restore() called without matching save().";this.fa.splice(m),this.da.push(this.Z.restore.bind(this.Z))},transform:function(m,C,X,W,B,H){let F=this.fa,k=F.length-6;F.splice(k,6,F[k]*m+F[k+2]*C,F[k+1]*m+F[k+3]*C,F[k]*X+F[k+2]*W,F[k+1]*X+F[k+3]*W,F[k]*B+F[k+2]*H+F[k+4],F[k+1]*B+F[k+3]*H+F[k+5]),this.da.push(this.Z.transform.bind(this.Z,m,C,X,W,B,H))},rotate:function(m){let C=Math.sin(m);m=Math.cos(m),this.transform(m,C,-C,m,0,0)},_drawPath:function(m,C){this.da.push(C.draw.bind(C,this.Z,m.ga,m.Ca===P?"evenodd":"nonzero"))},_drawImage:function(m,C,X){var W=m.Ta;if(W){var B=this.Z,H=e(C);this.da.push(function(){B.globalCompositeOperation=H,B.globalAlpha=X,B.drawImage(W,0,0),B.globalAlpha=1})}},_getMatrix:function(m){let C=this.fa,X=C.length-6;for(let W=0;6>W;++W)m[W]=C[X+W]},_drawImageMesh:function(m,C,X,W,B,H,F,k,dt,tt){var Tt=this.Z.canvas.width,et=this.Z.canvas.height;let en=dt-F,nn=tt-k;F=Math.max(F,0),k=Math.max(k,0),dt=Math.min(dt,Tt),tt=Math.min(tt,et);let te=dt-F,ee=tt-k;if(console.assert(te<=Math.min(en,Tt)),console.assert(ee<=Math.min(nn,et)),!(0>=te||0>=ee)){dt=te<en||ee<nn,Tt=tt=1;var kt=Math.ceil(te*tt),Bt=Math.ceil(ee*Tt);et=nt.ob(),kt>et&&(tt*=et/kt,kt=et),Bt>et&&(Tt*=et/Bt,Bt=et),x||(x=new h.DynamicRectanizer(et),x.reset(512,512)),et=x.addRect(kt,Bt),0>et&&(r(),E.add(this),et=x.addRect(kt,Bt),console.assert(0<=et));var rn=et&65535,an=et>>16;q.push({la:this.fa.slice(this.fa.length-6),image:m,Ea:rn,Fa:an,pb:F,qb:k,yb:kt,Ka:Bt,ra:tt,sa:Tt,Aa:new Float32Array(W),Ra:new Float32Array(B),indices:new Uint16Array(H),rb:dt,Oa:m.va<<1|(dt?1:0)}),ct+=W.length,St+=H.length;var zt=this.Z,Sn=e(C);this.da.push(function(){zt.save(),zt.resetTransform(),zt.globalCompositeOperation=Sn,zt.globalAlpha=X,zt.drawImage(nt.canvas(),rn,an,kt,Bt,F,k,te,ee),zt.restore()})}},_clipPath:function(m){this.da.push(this.Z.clip.bind(this.Z,m.ga,m.Ca===P?"evenodd":"nonzero"))},clear:function(){E.add(this),this.da.push(this.Z.clearRect.bind(this.Z,0,0,this.Ba.width,this.Ba.height))},flush:function(){},translate:function(m,C){this.transform(1,0,0,1,m,C)}});M.makeRenderer=function(m){return new O(m)},M.renderFactory={makeRenderPaint:function(){return new Q},makeRenderPath:function(){return new D},makeRenderImage:function(){return new g}};let Ft=M.load,Se=null;M.load=function(m){return new Promise(function(C){let X=null;Se={total:0,loaded:0,ready:function(){C(X)}},X=Ft(m),Se.total==0&&C(X)})},i=new mt,M.requestAnimationFrame=i.requestAnimationFrame.bind(i),M.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),M.enableFPSCounter=i.cb.bind(i),M.disableFPSCounter=i.$a,i.La=r,M.cleanup=function(){x&&x.delete()}};var Pt=Object.assign({},h),S=typeof window=="object",ft=typeof importScripts=="function",ot="",_t,At;(S||ft)&&(ft?ot=self.location.href:typeof document<"u"&&document.currentScript&&(ot=document.currentScript.src),it&&(ot=it),ot.indexOf("blob:")!==0?ot=ot.substr(0,ot.replace(/[?#].*/,"").lastIndexOf("/")+1):ot="",ft&&(At=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),_t=(e,t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?t(i.response):r()},i.onerror=r,i.send(null)});var Xt=h.print||console.log.bind(console),G=h.printErr||console.warn.bind(console);Object.assign(h,Pt),Pt=null;var vt;h.wasmBinary&&(vt=h.wasmBinary);var o=h.noExitRuntime||!0;typeof WebAssembly!="object"&&Gt("no native wasm support detected");var n,a=!1,p=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function y(e,t,r){var i=t+r;for(r=t;e[r]&&!(r>=i);)++r;if(16<r-t&&e.buffer&&p)return p.decode(e.subarray(t,r));for(i="";t<r;){var s=e[t++];if(s&128){var u=e[t++]&63;if((s&224)==192)i+=String.fromCharCode((s&31)<<6|u);else{var f=e[t++]&63;s=(s&240)==224?(s&15)<<12|u<<6|f:(s&7)<<18|u<<12|f<<6|e[t++]&63,65536>s?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else i+=String.fromCharCode(s)}return i}var b,w,A,j,_,L,I,lt,$;function bt(){var e=n.buffer;b=e,h.HEAP8=w=new Int8Array(e),h.HEAP16=j=new Int16Array(e),h.HEAP32=L=new Int32Array(e),h.HEAPU8=A=new Uint8Array(e),h.HEAPU16=_=new Uint16Array(e),h.HEAPU32=I=new Uint32Array(e),h.HEAPF32=lt=new Float32Array(e),h.HEAPF64=$=new Float64Array(e)}var st,Vt=[],Fe=[],Ie=[];function un(){var e=h.preRun.shift();Vt.unshift(e)}var Wt=0,ye=null,Zt=null;function Gt(e){throw h.onAbort&&h.onAbort(e),e="Aborted("+e+")",G(e),a=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),It(e),e}function We(){return ht.startsWith("data:application/octet-stream;base64,")}var ht;if(ht="canvas_advanced.wasm",!We()){var je=ht;ht=h.locateFile?h.locateFile(je,ot):ot+je}function ke(){var e=ht;try{if(e==ht&&vt)return new Uint8Array(vt);if(At)return At(e);throw"both async and sync fetching of the wasm failed"}catch(t){Gt(t)}}function cn(){if(!vt&&(S||ft)){if(typeof fetch=="function"&&!ht.startsWith("file://"))return fetch(ht,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ht+"'";return e.arrayBuffer()}).catch(function(){return ke()});if(_t)return new Promise(function(e,t){_t(ht,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return ke()})}function be(e){for(;0<e.length;)e.shift()(h)}function Be(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function re(e,t){return e=Be(e),function(){return t.apply(this,arguments)}}var gt=[{},{value:void 0},{value:null},{value:!0},{value:!1}],we=[];function ie(e){var t=Error,r=re(e,function(i){this.name=e,this.message=i,i=Error(i).stack,i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var Yt=void 0;function U(e){throw new Yt(e)}var Ot=e=>(e||U("Cannot use deleted val. handle = "+e),gt[e].value),Ct=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=we.length?we.pop():gt.length;return gt[t]={ya:1,value:e},t}},De=void 0,Xe=void 0;function z(e){for(var t="";A[e];)t+=Xe[A[e++]];return t}var $t=[];function Te(){for(;$t.length;){var e=$t.pop();e.U.ka=!1,e.delete()}}var Qt=void 0,Rt={};function Pe(e,t){for(t===void 0&&U("ptr should not be undefined");e.$;)t=e.na(t),e=e.$;return t}var jt={};function Ve(e){e=Je(e);var t=z(e);return Ut(e),t}function qt(e,t){var r=jt[e];return r===void 0&&U(t+" has unknown type "+Ve(e)),r}function ae(){}var _e=!1;function Ye(e){--e.count.value,e.count.value===0&&(e.aa?e.ca.ha(e.aa):e.X.V.ha(e.W))}function Ne(e,t,r){return t===r?e:r.$===void 0?null:(e=Ne(e,t,r.$),e===null?null:r.ab(e))}var He={};function fn(e,t){return t=Pe(e,t),Rt[t]}var ze=void 0;function oe(e){throw new ze(e)}function se(e,t){return t.X&&t.W||oe("makeClassHandle requires ptr and ptrType"),!!t.ca!=!!t.aa&&oe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Nt(Object.create(e,{U:{value:t}}))}function Nt(e){return typeof FinalizationRegistry>"u"?(Nt=t=>t,e):(_e=new FinalizationRegistry(t=>{Ye(t.U)}),Nt=t=>{var r=t.U;return r.aa&&_e.register(t,{U:r},t),t},ae=t=>{_e.unregister(t)},Nt(e))}var ue={};function Kt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Jt(e){return this.fromWireType(L[e>>2])}var Ht={},ce={};function ut(e,t,r){function i(c){c=r(c),c.length!==e.length&&oe("Mismatched type converter count");for(var d=0;d<e.length;++d)wt(e[d],c[d])}e.forEach(function(c){ce[c]=t});var s=Array(t.length),u=[],f=0;t.forEach((c,d)=>{jt.hasOwnProperty(c)?s[d]=jt[c]:(u.push(c),Ht.hasOwnProperty(c)||(Ht[c]=[]),Ht[c].push(()=>{s[d]=jt[c],++f,f===u.length&&i(s)}))}),u.length===0&&i(s)}function fe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function wt(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||U('type "'+i+'" must have a positive integer typeid pointer'),jt.hasOwnProperty(e)){if(r.lb)return;U("Cannot register type '"+i+"' twice")}jt[e]=t,delete ce[e],Ht.hasOwnProperty(e)&&(t=Ht[e],delete Ht[e],t.forEach(s=>s()))}function Ae(e){U(e.U.X.V.name+" instance already deleted")}function xt(){}function Ce(e,t,r){if(e[t].Y===void 0){var i=e[t];e[t]=function(){return e[t].Y.hasOwnProperty(arguments.length)||U("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].Y+")!"),e[t].Y[arguments.length].apply(this,arguments)},e[t].Y=[],e[t].Y[i.ja]=i}}function Re(e,t,r){h.hasOwnProperty(e)?((r===void 0||h[e].Y!==void 0&&h[e].Y[r]!==void 0)&&U("Cannot register public name '"+e+"' twice"),Ce(h,e,e),h.hasOwnProperty(r)&&U("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),h[e].Y[r]=t):(h[e]=t,r!==void 0&&(h[e].zb=r))}function ln(e,t,r,i,s,u,f,c){this.name=e,this.constructor=t,this.ea=r,this.ha=i,this.$=s,this.gb=u,this.na=f,this.ab=c,this.Ma=[]}function le(e,t,r){for(;t!==r;)t.na||U("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.na(e),t=t.$;return e}function hn(e,t){return t===null?(this.wa&&U("null is not a valid "+this.name),0):(t.U||U('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||U("Cannot pass deleted object as a pointer of type "+this.name),le(t.U.W,t.U.X.V,this.V))}function dn(e,t){if(t===null){if(this.wa&&U("null is not a valid "+this.name),this.qa){var r=this.xa();return e!==null&&e.push(this.ha,r),r}return 0}if(t.U||U('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||U("Cannot pass deleted object as a pointer of type "+this.name),!this.pa&&t.U.X.pa&&U("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name),r=le(t.U.W,t.U.X.V,this.V),this.qa)switch(t.U.aa===void 0&&U("Passing raw pointer to smart pointer is illegal"),this.xb){case 0:t.U.ca===this?r=t.U.aa:U("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name);break;case 1:r=t.U.aa;break;case 2:if(t.U.ca===this)r=t.U.aa;else{var i=t.clone();r=this.tb(r,Ct(function(){i.delete()})),e!==null&&e.push(this.ha,r)}break;default:U("Unsupporting sharing policy")}return r}function pn(e,t){return t===null?(this.wa&&U("null is not a valid "+this.name),0):(t.U||U('Cannot pass "'+Me(t)+'" as a '+this.name),t.U.W||U("Cannot pass deleted object as a pointer of type "+this.name),t.U.X.pa&&U("Cannot convert argument of type "+t.U.X.name+" to parameter type "+this.name),le(t.U.W,t.U.X.V,this.V))}function Et(e,t,r,i){this.name=e,this.V=t,this.wa=r,this.pa=i,this.qa=!1,this.ha=this.tb=this.xa=this.Na=this.xb=this.sb=void 0,t.$!==void 0?this.toWireType=dn:(this.toWireType=i?hn:pn,this.ba=null)}function Ze(e,t,r){h.hasOwnProperty(e)||oe("Replacing nonexistant public symbol"),h[e].Y!==void 0&&r!==void 0?h[e].Y[r]=t:(h[e]=t,h[e].ja=r)}function mn(e,t){var r=[];return function(){if(r.length=0,Object.assign(r,arguments),e.includes("j")){var i=h["dynCall_"+e];i=r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}else i=st.get(t).apply(null,r);return i}}function at(e,t){e=z(e);var r=e.includes("j")?mn(e,t):st.get(t);return typeof r!="function"&&U("unknown function pointer with signature "+e+": "+t),r}var Ge=void 0;function Mt(e,t){function r(u){s[u]||jt[u]||(ce[u]?ce[u].forEach(r):(i.push(u),s[u]=!0))}var i=[],s={};throw t.forEach(r),new Ge(e+": "+i.map(Ve).join([", "]))}function he(e,t,r,i,s){var u=t.length;2>u&&U("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&r!==null,c=!1;for(r=1;r<t.length;++r)if(t[r]!==null&&t[r].ba===void 0){c=!0;break}var d=t[0].name!=="void",l=u-2,v=Array(l),T=[],P=[];return function(){if(arguments.length!==l&&U("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),P.length=0,T.length=f?2:1,T[0]=s,f){var R=t[1].toWireType(P,this);T[1]=R}for(var g=0;g<l;++g)v[g]=t[g+2].toWireType(P,arguments[g]),T.push(v[g]);if(g=i.apply(null,T),c)Kt(P);else for(var D=f?1:2;D<t.length;D++){var Q=D===1?R:v[D-2];t[D].ba!==null&&t[D].ba(Q)}return R=d?t[0].fromWireType(g):void 0,R}}function de(e,t){for(var r=[],i=0;i<e;i++)r.push(I[t+4*i>>2]);return r}function $e(e,t,r){return e instanceof Object||U(r+' with invalid "this": '+e),e instanceof t.V.constructor||U(r+' incompatible with "this" of type '+e.constructor.name),e.U.W||U("cannot call emscripten binding method "+r+" on deleted object"),le(e.U.W,e.U.X.V,t.V)}function Ee(e){4<e&&--gt[e].ya===0&&(gt[e]=void 0,we.push(e))}function vn(e,t,r){switch(t){case 0:return function(i){return this.fromWireType((r?w:A)[i])};case 1:return function(i){return this.fromWireType((r?j:_)[i>>1])};case 2:return function(i){return this.fromWireType((r?L:I)[i>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Me(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function gn(e,t){switch(t){case 2:return function(r){return this.fromWireType(lt[r>>2])};case 3:return function(r){return this.fromWireType($[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function yn(e,t,r){switch(t){case 0:return r?function(i){return w[i]}:function(i){return A[i]};case 1:return r?function(i){return j[i>>1]}:function(i){return _[i>>1]};case 2:return r?function(i){return L[i>>2]}:function(i){return I[i>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Qe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function bn(e,t){for(var r=e>>1,i=r+t/2;!(r>=i)&&_[r];)++r;if(r<<=1,32<r-e&&Qe)return Qe.decode(A.subarray(e,r));for(r="",i=0;!(i>=t/2);++i){var s=j[e+2*i>>1];if(s==0)break;r+=String.fromCharCode(s)}return r}function wn(e,t,r){if(r===void 0&&(r=2147483647),2>r)return 0;r-=2;var i=t;r=r<2*e.length?r/2:e.length;for(var s=0;s<r;++s)j[t>>1]=e.charCodeAt(s),t+=2;return j[t>>1]=0,t-i}function Tn(e){return 2*e.length}function Pn(e,t){for(var r=0,i="";!(r>=t/4);){var s=L[e+4*r>>2];if(s==0)break;++r,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023)):i+=String.fromCharCode(s)}return i}function _n(e,t,r){if(r===void 0&&(r=2147483647),4>r)return 0;var i=t;r=i+r-4;for(var s=0;s<e.length;++s){var u=e.charCodeAt(s);if(55296<=u&&57343>=u){var f=e.charCodeAt(++s);u=65536+((u&1023)<<10)|f&1023}if(L[t>>2]=u,t+=4,t+4>r)break}return L[t>>2]=0,t-i}function An(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);55296<=i&&57343>=i&&++r,t+=4}return t}var Cn={};function pe(e){var t=Cn[e];return t===void 0?z(e):t}var me=[];function Rn(e){var t=me.length;return me.push(e),t}function En(e,t){for(var r=Array(e),i=0;i<e;++i)r[i]=qt(I[t+4*i>>2],"parameter "+i);return r}var qe=[],Mn=[null,[],[]];Yt=h.BindingError=ie("BindingError"),h.count_emval_handles=function(){for(var e=0,t=5;t<gt.length;++t)gt[t]!==void 0&&++e;return e},h.get_first_emval=function(){for(var e=5;e<gt.length;++e)if(gt[e]!==void 0)return gt[e];return null},De=h.PureVirtualError=ie("PureVirtualError");for(var Ke=Array(256),ve=0;256>ve;++ve)Ke[ve]=String.fromCharCode(ve);Xe=Ke,h.getInheritedInstanceCount=function(){return Object.keys(Rt).length},h.getLiveInheritedInstances=function(){var e=[],t;for(t in Rt)Rt.hasOwnProperty(t)&&e.push(Rt[t]);return e},h.flushPendingDeletes=Te,h.setDelayFunction=function(e){Qt=e,$t.length&&Qt&&Qt(Te)},ze=h.InternalError=ie("InternalError"),xt.prototype.isAliasOf=function(e){if(!(this instanceof xt&&e instanceof xt))return!1;var t=this.U.X.V,r=this.U.W,i=e.U.X.V;for(e=e.U.W;t.$;)r=t.na(r),t=t.$;for(;i.$;)e=i.na(e),i=i.$;return t===i&&r===e},xt.prototype.clone=function(){if(this.U.W||Ae(this),this.U.ma)return this.U.count.value+=1,this;var e=Nt,t=Object,r=t.create,i=Object.getPrototypeOf(this),s=this.U;return e=e(r.call(t,i,{U:{value:{count:s.count,ka:s.ka,ma:s.ma,W:s.W,X:s.X,aa:s.aa,ca:s.ca}}})),e.U.count.value+=1,e.U.ka=!1,e},xt.prototype.delete=function(){this.U.W||Ae(this),this.U.ka&&!this.U.ma&&U("Object already scheduled for deletion"),ae(this),Ye(this.U),this.U.ma||(this.U.aa=void 0,this.U.W=void 0)},xt.prototype.isDeleted=function(){return!this.U.W},xt.prototype.deleteLater=function(){return this.U.W||Ae(this),this.U.ka&&!this.U.ma&&U("Object already scheduled for deletion"),$t.push(this),$t.length===1&&Qt&&Qt(Te),this.U.ka=!0,this},Et.prototype.hb=function(e){return this.Na&&(e=this.Na(e)),e},Et.prototype.Ga=function(e){this.ha&&this.ha(e)},Et.prototype.argPackAdvance=8,Et.prototype.readValueFromPointer=Jt,Et.prototype.deleteObject=function(e){e!==null&&e.delete()},Et.prototype.fromWireType=function(e){function t(){return this.qa?se(this.V.ea,{X:this.sb,W:r,ca:this,aa:e}):se(this.V.ea,{X:this,W:e})}var r=this.hb(e);if(!r)return this.Ga(e),null;var i=fn(this.V,r);if(i!==void 0)return i.U.count.value===0?(i.U.W=r,i.U.aa=e,i.clone()):(i=i.clone(),this.Ga(e),i);if(i=this.V.gb(r),i=He[i],!i)return t.call(this);i=this.pa?i.Xa:i.pointerType;var s=Ne(r,this.V,i.V);return s===null?t.call(this):this.qa?se(i.V.ea,{X:i,W:s,ca:this,aa:e}):se(i.V.ea,{X:i,W:s})},Ge=h.UnboundTypeError=ie("UnboundTypeError");var Un={l:function(e,t,r){e=z(e),t=qt(t,"wrapper"),r=Ot(r);var i=[].slice,s=t.V,u=s.ea,f=s.$.ea,c=s.$.constructor;e=re(e,function(){s.$.Ma.forEach(function(l){if(this[l]===f[l])throw new De("Pure virtual function "+l+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:u}),this.__construct.apply(this,i.call(arguments))}),u.__construct=function(){this===u&&U("Pass correct 'this' to __construct");var l=c.implement.apply(void 0,[this].concat(i.call(arguments)));ae(l);var v=l.U;l.notifyOnDestruction(),v.ma=!0,Object.defineProperties(this,{U:{value:v}}),Nt(this),l=v.W,l=Pe(s,l),Rt.hasOwnProperty(l)?U("Tried to register registered instance: "+l):Rt[l]=this},u.__destruct=function(){this===u&&U("Pass correct 'this' to __destruct"),ae(this);var l=this.U.W;l=Pe(s,l),Rt.hasOwnProperty(l)?delete Rt[l]:U("Tried to unregister unregistered instance: "+l)},e.prototype=Object.create(u);for(var d in r)e.prototype[d]=r[d];return Ct(e)},I:function(e){var t=ue[e];delete ue[e];var r=t.xa,i=t.ha,s=t.Ja,u=s.map(f=>f.kb).concat(s.map(f=>f.vb));ut([e],u,f=>{var c={};return s.forEach((d,l)=>{var v=f[l],T=d.ib,P=d.jb,R=f[l+s.length],g=d.ub,D=d.wb;c[d.eb]={read:Q=>v.fromWireType(T(P,Q)),write:(Q,E)=>{var x=[];g(D,Q,R.toWireType(x,E)),Kt(x)}}}),[{name:t.name,fromWireType:function(d){var l={},v;for(v in c)l[v]=c[v].read(d);return i(d),l},toWireType:function(d,l){for(var v in c)if(!(v in l))throw new TypeError('Missing field:  "'+v+'"');var T=r();for(v in c)c[v].write(T,l[v]);return d!==null&&d.push(i,T),T},argPackAdvance:8,readValueFromPointer:Jt,ba:i}]})},x:function(){},B:function(e,t,r,i,s){var u=fe(r);t=z(t),wt(e,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,c){return c?i:s},argPackAdvance:8,readValueFromPointer:function(f){if(r===1)var c=w;else if(r===2)c=j;else if(r===4)c=L;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(c[f>>u])},ba:null})},c:function(e,t,r,i,s,u,f,c,d,l,v,T,P){v=z(v),u=at(s,u),c&&(c=at(f,c)),l&&(l=at(d,l)),P=at(T,P);var R=Be(v);Re(R,function(){Mt("Cannot construct "+v+" due to unbound types",[i])}),ut([e,t,r],i?[i]:[],function(g){if(g=g[0],i)var D=g.V,Q=D.ea;else Q=xt.prototype;g=re(R,function(){if(Object.getPrototypeOf(this)!==E)throw new Yt("Use 'new' to construct "+v);if(x.ia===void 0)throw new Yt(v+" has no accessible constructor");var ct=x.ia[arguments.length];if(ct===void 0)throw new Yt("Tried to invoke ctor of "+v+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(x.ia).toString()+") parameters instead!");return ct.apply(this,arguments)});var E=Object.create(Q,{constructor:{value:g}});g.prototype=E;var x=new ln(v,g,E,P,D,u,c,l);D=new Et(v,x,!0,!1),Q=new Et(v+"*",x,!1,!1);var q=new Et(v+" const*",x,!1,!0);return He[e]={pointerType:Q,Xa:q},Ze(R,g),[D,Q,q]})},h:function(e,t,r,i,s,u,f){var c=de(r,i);t=z(t),u=at(s,u),ut([],[e],function(d){function l(){Mt("Cannot call "+v+" due to unbound types",c)}d=d[0];var v=d.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var T=d.V.constructor;return T[t]===void 0?(l.ja=r-1,T[t]=l):(Ce(T,t,v),T[t].Y[r-1]=l),ut([],c,function(P){return P=he(v,[P[0],null].concat(P.slice(1)),null,u,f),T[t].Y===void 0?(P.ja=r-1,T[t]=P):T[t].Y[r-1]=P,[]}),[]})},n:function(e,t,r,i,s,u,f,c){t=z(t),u=at(s,u),ut([],[e],function(d){d=d[0];var l=d.name+"."+t,v={get:function(){Mt("Cannot access "+l+" due to unbound types",[r])},enumerable:!0,configurable:!0};return v.set=c?()=>{Mt("Cannot access "+l+" due to unbound types",[r])}:()=>{U(l+" is a read-only property")},Object.defineProperty(d.V.constructor,t,v),ut([],[r],function(T){T=T[0];var P={get:function(){return T.fromWireType(u(i))},enumerable:!0};return c&&(c=at(f,c),P.set=R=>{var g=[];c(i,T.toWireType(g,R)),Kt(g)}),Object.defineProperty(d.V.constructor,t,P),[]}),[]})},k:function(e,t,r,i,s,u){0<t||Gt();var f=de(t,r);s=at(i,s),ut([],[e],function(c){c=c[0];var d="constructor "+c.name;if(c.V.ia===void 0&&(c.V.ia=[]),c.V.ia[t-1]!==void 0)throw new Yt("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.V.ia[t-1]=()=>{Mt("Cannot construct "+c.name+" due to unbound types",f)},ut([],f,function(l){return l.splice(1,0,null),c.V.ia[t-1]=he(d,l,null,s,u),[]}),[]})},a:function(e,t,r,i,s,u,f,c){var d=de(r,i);t=z(t),u=at(s,u),ut([],[e],function(l){function v(){Mt("Cannot call "+T+" due to unbound types",d)}l=l[0];var T=l.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&l.V.Ma.push(t);var P=l.V.ea,R=P[t];return R===void 0||R.Y===void 0&&R.className!==l.name&&R.ja===r-2?(v.ja=r-2,v.className=l.name,P[t]=v):(Ce(P,t,T),P[t].Y[r-2]=v),ut([],d,function(g){return g=he(T,g,l,u,f),P[t].Y===void 0?(g.ja=r-2,P[t]=g):P[t].Y[r-2]=g,[]}),[]})},b:function(e,t,r,i,s,u,f,c,d,l){t=z(t),s=at(i,s),ut([],[e],function(v){v=v[0];var T=v.name+"."+t,P={get:function(){Mt("Cannot access "+T+" due to unbound types",[r,f])},enumerable:!0,configurable:!0};return P.set=d?()=>{Mt("Cannot access "+T+" due to unbound types",[r,f])}:()=>{U(T+" is a read-only property")},Object.defineProperty(v.V.ea,t,P),ut([],d?[r,f]:[r],function(R){var g=R[0],D={get:function(){var E=$e(this,v,T+" getter");return g.fromWireType(s(u,E))},enumerable:!0};if(d){d=at(c,d);var Q=R[1];D.set=function(E){var x=$e(this,v,T+" setter"),q=[];d(l,x,Q.toWireType(q,E)),Kt(q)}}return Object.defineProperty(v.V.ea,t,D),[]}),[]})},A:function(e,t){t=z(t),wt(e,{name:t,fromWireType:function(r){var i=Ot(r);return Ee(r),i},toWireType:function(r,i){return Ct(i)},argPackAdvance:8,readValueFromPointer:Jt,ba:null})},j:function(e,t,r,i){function s(){}r=fe(r),t=z(t),s.values={},wt(e,{name:t,constructor:s,fromWireType:function(u){return this.constructor.values[u]},toWireType:function(u,f){return f.value},argPackAdvance:8,readValueFromPointer:vn(t,r,i),ba:null}),Re(t,s)},i:function(e,t,r){var i=qt(e,"enum");t=z(t),e=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:re(i.name+"_"+t,function(){})}}),e.values[r]=i,e[t]=i},r:function(e,t,r){r=fe(r),t=z(t),wt(e,{name:t,fromWireType:function(i){return i},toWireType:function(i,s){return s},argPackAdvance:8,readValueFromPointer:gn(t,r),ba:null})},q:function(e,t,r,i,s,u){var f=de(t,r);e=z(e),s=at(i,s),Re(e,function(){Mt("Cannot call "+e+" due to unbound types",f)},t-1),ut([],f,function(c){return Ze(e,he(e,[c[0],null].concat(c.slice(1)),null,s,u),t-1),[]})},g:function(e,t,r,i,s){t=z(t),s===-1&&(s=4294967295),s=fe(r);var u=c=>c;if(i===0){var f=32-8*r;u=c=>c<<f>>>f}r=t.includes("unsigned")?function(c,d){return d>>>0}:function(c,d){return d},wt(e,{name:t,fromWireType:u,toWireType:r,argPackAdvance:8,readValueFromPointer:yn(t,s,i!==0),ba:null})},d:function(e,t,r){function i(u){u>>=2;var f=I;return new s(b,f[u+1],f[u])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];r=z(r),wt(e,{name:r,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{lb:!0})},s:function(e,t){t=z(t);var r=t==="std::string";wt(e,{name:t,fromWireType:function(i){var s=I[i>>2],u=i+4;if(r)for(var f=u,c=0;c<=s;++c){var d=u+c;if(c==s||A[d]==0){if(f=f?y(A,f,d-f):"",l===void 0)var l=f;else l+=String.fromCharCode(0),l+=f;f=d+1}}else{for(l=Array(s),c=0;c<s;++c)l[c]=String.fromCharCode(A[u+c]);l=l.join("")}return Ut(i),l},toWireType:function(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,f=typeof s=="string";f||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||U("Cannot pass non-string to std::string");var c;if(r&&f)for(u=c=0;u<s.length;++u){var d=s.charCodeAt(u);127>=d?c++:2047>=d?c+=2:55296<=d&&57343>=d?(c+=4,++u):c+=3}else c=s.length;if(u=c,c=Ue(4+u+1),d=c+4,I[c>>2]=u,r&&f){if(f=d,d=u+1,u=A,0<d){d=f+d-1;for(var l=0;l<s.length;++l){var v=s.charCodeAt(l);if(55296<=v&&57343>=v){var T=s.charCodeAt(++l);v=65536+((v&1023)<<10)|T&1023}if(127>=v){if(f>=d)break;u[f++]=v}else{if(2047>=v){if(f+1>=d)break;u[f++]=192|v>>6}else{if(65535>=v){if(f+2>=d)break;u[f++]=224|v>>12}else{if(f+3>=d)break;u[f++]=240|v>>18,u[f++]=128|v>>12&63}u[f++]=128|v>>6&63}u[f++]=128|v&63}}u[f]=0}}else if(f)for(f=0;f<u;++f)l=s.charCodeAt(f),255<l&&(Ut(d),U("String has UTF-16 code units that do not fit in 8 bits")),A[d+f]=l;else for(f=0;f<u;++f)A[d+f]=s[f];return i!==null&&i.push(Ut,c),c},argPackAdvance:8,readValueFromPointer:Jt,ba:function(i){Ut(i)}})},p:function(e,t,r){if(r=z(r),t===2)var i=bn,s=wn,u=Tn,f=()=>_,c=1;else t===4&&(i=Pn,s=_n,u=An,f=()=>I,c=2);wt(e,{name:r,fromWireType:function(d){for(var l=I[d>>2],v=f(),T,P=d+4,R=0;R<=l;++R){var g=d+4+R*t;(R==l||v[g>>c]==0)&&(P=i(P,g-P),T===void 0?T=P:(T+=String.fromCharCode(0),T+=P),P=g+t)}return Ut(d),T},toWireType:function(d,l){typeof l!="string"&&U("Cannot pass non-string to C++ string type "+r);var v=u(l),T=Ue(4+v+t);return I[T>>2]=v>>c,s(l,T+4,v+t),d!==null&&d.push(Ut,T),T},argPackAdvance:8,readValueFromPointer:Jt,ba:function(d){Ut(d)}})},K:function(e,t,r,i,s,u){ue[e]={name:z(t),xa:at(r,i),ha:at(s,u),Ja:[]}},J:function(e,t,r,i,s,u,f,c,d,l){ue[e].Ja.push({eb:z(t),kb:r,ib:at(i,s),jb:u,vb:f,ub:at(c,d),wb:l})},C:function(e,t){t=z(t),wt(e,{nb:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},m:function(e,t,r){e=Ot(e),t=qt(t,"emval::as");var i=[],s=Ct(i);return I[r>>2]=s,t.toWireType(i,e)},t:function(e,t,r,i,s){e=me[e],t=Ot(t),r=pe(r);var u=[];return I[i>>2]=Ct(u),e(t,r,u,s)},f:function(e,t,r,i){e=me[e],t=Ot(t),r=pe(r),e(t,r,null,i)},L:Ee,e:function(e,t){var r=En(e,t),i=r[0];t=i.name+"_$"+r.slice(1).map(function(f){return f.name}).join("_")+"$";var s=qe[t];if(s!==void 0)return s;var u=Array(e-1);return s=Rn((f,c,d,l)=>{for(var v=0,T=0;T<e-1;++T)u[T]=r[T+1].readValueFromPointer(l+v),v+=r[T+1].argPackAdvance;for(f=f[c].apply(f,u),T=0;T<e-1;++T)r[T+1].Za&&r[T+1].Za(u[T]);if(!i.nb)return i.toWireType(d,f)}),qe[t]=s},D:function(e){return e=pe(e),Ct(h[e])},H:function(e,t){return e=Ot(e),t=Ot(t),Ct(e[t])},E:function(e){4<e&&(gt[e].ya+=1)},G:function(e){return Ct(pe(e))},F:function(e){var t=Ot(e);Kt(t),Ee(e)},u:function(e,t){return e=qt(e,"_emval_take_value"),e=e.readValueFromPointer(t),Ct(e)},v:function(){Gt("")},o:function(e){var t=A.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i),s=s.min.call(s,2147483648,i+(65536-i%65536)%65536);t:{try{n.grow(s-b.byteLength+65535>>>16),bt();var u=1;break t}catch{}u=void 0}if(u)return!0}return!1},z:function(){return 52},w:function(){return 70},y:function(e,t,r,i){for(var s=0,u=0;u<r;u++){var f=I[t>>2],c=I[t+4>>2];t+=8;for(var d=0;d<c;d++){var l=A[f+d],v=Mn[e];l===0||l===10?((e===1?Xt:G)(y(v,0)),v.length=0):v.push(l)}s+=c}return I[i>>2]=s,0}};(function(){function e(s){h.asm=s.exports,n=h.asm.M,bt(),st=h.asm.S,Fe.unshift(h.asm.N),Wt--,h.monitorRunDependencies&&h.monitorRunDependencies(Wt),Wt==0&&(ye!==null&&(clearInterval(ye),ye=null),Zt&&(s=Zt,Zt=null,s()))}function t(s){e(s.instance)}function r(s){return cn().then(function(u){return WebAssembly.instantiate(u,i)}).then(function(u){return u}).then(s,function(u){G("failed to asynchronously prepare wasm: "+u),Gt(u)})}var i={a:Un};if(Wt++,h.monitorRunDependencies&&h.monitorRunDependencies(Wt),h.instantiateWasm)try{return h.instantiateWasm(i,e)}catch(s){return G("Module.instantiateWasm callback failed with error: "+s),!1}return function(){return vt||typeof WebAssembly.instantiateStreaming!="function"||We()||ht.startsWith("file://")||typeof fetch!="function"?r(t):fetch(ht,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,i).then(t,function(u){return G("wasm streaming compile failed: "+u),G("falling back to ArrayBuffer instantiation"),r(t)})})}().catch(It),{}})(),h.___wasm_call_ctors=function(){return(h.___wasm_call_ctors=h.asm.N).apply(null,arguments)};var Ut=h._free=function(){return(Ut=h._free=h.asm.O).apply(null,arguments)},Ue=h._malloc=function(){return(Ue=h._malloc=h.asm.P).apply(null,arguments)},Je=h.___getTypeName=function(){return(Je=h.___getTypeName=h.asm.Q).apply(null,arguments)};h.__embind_initialize_bindings=function(){return(h.__embind_initialize_bindings=h.asm.R).apply(null,arguments)},h.dynCall_jiji=function(){return(h.dynCall_jiji=h.asm.T).apply(null,arguments)};var ge;Zt=function e(){ge||tn(),ge||(Zt=e)};function tn(){function e(){if(!ge&&(ge=!0,h.calledRun=!0,!a)){if(be(Fe),pt(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var t=h.postRun.shift();Ie.unshift(t)}be(Ie)}}if(!(0<Wt)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)un();be(Vt),0<Wt||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),e()},1)):e())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return tn(),M.ready}})();let rt=Lt},N=>{N.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"1.0.98","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(N,K,J)=>{J.r(K),J.d(K,{registerTouchInteractions:()=>Lt.registerTouchInteractions});var Lt=J(4)},(N,K,J)=>{J.r(K),J.d(K,{registerTouchInteractions:()=>Lt});let Lt=({canvas:rt,artboard:it,stateMachines:M=[],renderer:h,rive:pt,fit:It,alignment:mt})=>{if(!rt||!M.length||!h||!pt||!it)return null;let nt=(Pt=>{let S=Pt.currentTarget.getBoundingClientRect(),ft=Pt.clientX-S.left,ot=Pt.clientY-S.top,_t=pt.computeAlignment(It,mt,{minX:0,minY:0,maxX:S.width,maxY:S.height},it.bounds),At=new pt.Mat2D;_t.invert(At);let Xt=new pt.Vec2D(ft,ot),G=pt.mapXY(At,Xt),vt=G.x(),o=G.y();switch(G.delete(),At.delete(),Xt.delete(),_t.delete(),Pt.type){case"mouseover":case"mouseout":case"mousemove":{for(let n of M)n.pointerMove(vt,o);break}case"mousedown":{for(let n of M)n.pointerDown(vt,o);break}case"mouseup":{for(let n of M)n.pointerUp(vt,o);break}default:}}).bind(void 0);return rt.addEventListener("mouseover",nt),rt.addEventListener("mouseout",nt),rt.addEventListener("mousemove",nt),rt.addEventListener("mousedown",nt),rt.addEventListener("mouseup",nt),()=>{rt.removeEventListener("mouseover",nt),rt.removeEventListener("mouseout",nt),rt.removeEventListener("mousemove",nt),rt.removeEventListener("mousedown",nt),rt.removeEventListener("mouseup",nt)}}}],V={};function Y(N){var K=V[N];if(K!==void 0)return K.exports;var J=V[N]={exports:{}};return Z[N](J,J.exports,Y),J.exports}Y.d=(N,K)=>{for(var J in K)Y.o(K,J)&&!Y.o(N,J)&&Object.defineProperty(N,J,{enumerable:!0,get:K[J]})},Y.o=(N,K)=>Object.prototype.hasOwnProperty.call(N,K),Y.r=N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var Dt={};return(()=>{Y.r(Dt),Y.d(Dt,{Fit:()=>it,Alignment:()=>M,Layout:()=>h,RuntimeLoader:()=>pt,StateMachineInputType:()=>mt,StateMachineInput:()=>yt,EventType:()=>S,LoopType:()=>ft,Rive:()=>At,Testing:()=>vt});var N=Y(1),K=Y(2),J=Y(3),Lt=function(o,n,a,p){function y(b){return b instanceof a?b:new a(function(w){w(b)})}return new(a||(a=Promise))(function(b,w){function A(L){try{_(p.next(L))}catch(I){w(I)}}function j(L){try{_(p.throw(L))}catch(I){w(I)}}function _(L){L.done?b(L.value):y(L.value).then(A,j)}_((p=p.apply(o,n||[])).next())})},rt=function(o,n){var a={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},p,y,b,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(_){return function(L){return j([_,L])}}function j(_){if(p)throw new TypeError("Generator is already executing.");for(;a;)try{if(p=1,y&&(b=_[0]&2?y.return:_[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,_[1])).done)return b;switch(y=0,b&&(_=[_[0]&2,b.value]),_[0]){case 0:case 1:b=_;break;case 4:return a.label++,{value:_[1],done:!1};case 5:a.label++,y=_[1],_=[0];continue;case 7:_=a.ops.pop(),a.trys.pop();continue;default:if(b=a.trys,!(b=b.length>0&&b[b.length-1])&&(_[0]===6||_[0]===2)){a=0;continue}if(_[0]===3&&(!b||_[1]>b[0]&&_[1]<b[3])){a.label=_[1];break}if(_[0]===6&&a.label<b[1]){a.label=b[1],b=_;break}if(b&&a.label<b[2]){a.label=b[2],a.ops.push(_);break}b[2]&&a.ops.pop(),a.trys.pop();continue}_=n.call(o,a)}catch(L){_=[6,L],y=0}finally{p=b=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},it;(function(o){o.Cover="cover",o.Contain="contain",o.Fill="fill",o.FitWidth="fitWidth",o.FitHeight="fitHeight",o.None="none",o.ScaleDown="scaleDown"})(it||(it={}));var M;(function(o){o.Center="center",o.TopLeft="topLeft",o.TopCenter="topCenter",o.TopRight="topRight",o.CenterLeft="centerLeft",o.CenterRight="centerRight",o.BottomLeft="bottomLeft",o.BottomCenter="bottomCenter",o.BottomRight="bottomRight"})(M||(M={}));var h=function(){function o(n){var a,p,y,b,w,A;this.fit=(a=n?.fit)!==null&&a!==void 0?a:it.Contain,this.alignment=(p=n?.alignment)!==null&&p!==void 0?p:M.Center,this.minX=(y=n?.minX)!==null&&y!==void 0?y:0,this.minY=(b=n?.minY)!==null&&b!==void 0?b:0,this.maxX=(w=n?.maxX)!==null&&w!==void 0?w:0,this.maxY=(A=n?.maxY)!==null&&A!==void 0?A:0}return o.new=function(n){var a=n.fit,p=n.alignment,y=n.minX,b=n.minY,w=n.maxX,A=n.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new o({fit:a,alignment:p,minX:y,minY:b,maxX:w,maxY:A})},o.prototype.copyWith=function(n){var a=n.fit,p=n.alignment,y=n.minX,b=n.minY,w=n.maxX,A=n.maxY;return new o({fit:a??this.fit,alignment:p??this.alignment,minX:y??this.minX,minY:b??this.minY,maxX:w??this.maxX,maxY:A??this.maxY})},o.prototype.runtimeFit=function(n){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===it.Cover?a=n.Fit.cover:this.fit===it.Contain?a=n.Fit.contain:this.fit===it.Fill?a=n.Fit.fill:this.fit===it.FitWidth?a=n.Fit.fitWidth:this.fit===it.FitHeight?a=n.Fit.fitHeight:this.fit===it.ScaleDown?a=n.Fit.scaleDown:a=n.Fit.none,this.cachedRuntimeFit=a,a},o.prototype.runtimeAlignment=function(n){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===M.TopLeft?a=n.Alignment.topLeft:this.alignment===M.TopCenter?a=n.Alignment.topCenter:this.alignment===M.TopRight?a=n.Alignment.topRight:this.alignment===M.CenterLeft?a=n.Alignment.centerLeft:this.alignment===M.CenterRight?a=n.Alignment.centerRight:this.alignment===M.BottomLeft?a=n.Alignment.bottomLeft:this.alignment===M.BottomCenter?a=n.Alignment.bottomCenter:this.alignment===M.BottomRight?a=n.Alignment.bottomRight:a=n.Alignment.center,this.cachedRuntimeAlignment=a,a},o}(),pt=function(){function o(){}return o.loadRuntime=function(){N.default({locateFile:function(){return o.wasmURL}}).then(function(n){var a;for(o.runtime=n;o.callBackQueue.length>0;)(a=o.callBackQueue.shift())===null||a===void 0||a(o.runtime)})},o.getInstance=function(n){o.isLoading||(o.isLoading=!0,o.loadRuntime()),o.runtime?n(o.runtime):o.callBackQueue.push(n)},o.awaitInstance=function(){return new Promise(function(n){return o.getInstance(function(a){return n(a)})})},o.setWasmUrl=function(n){o.wasmURL=n},o.isLoading=!1,o.callBackQueue=[],o.wasmURL="https://unpkg.com/"+K.name+"@"+K.version+"/rive.wasm",o}(),It=function(){function o(n,a,p,y){this.animation=n,this.artboard=a,this.playing=y,this.loopCount=0,this.scrubTo=null,this.instance=new p.LinearAnimationInstance(n,a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return this.instance.time},set:function(n){this.instance.time=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.scrubTo===null?this.instance.advance(n):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},o.prototype.apply=function(n){this.instance.apply(n)},Object.defineProperty(o.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.instance.delete()},o}(),mt;(function(o){o[o.Number=56]="Number",o[o.Trigger=58]="Trigger",o[o.Boolean=59]="Boolean"})(mt||(mt={}));var yt=function(){function o(n,a){this.type=n,this.runtimeInput=a}return Object.defineProperty(o.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(n){this.runtimeInput.value=n},enumerable:!1,configurable:!0}),o.prototype.fire=function(){this.type===mt.Trigger&&this.runtimeInput.fire()},o}(),nt=function(){function o(n,a,p,y){this.stateMachine=n,this.playing=p,this.artboard=y,this.inputs=[],this.instance=new a.StateMachineInstance(n,y),this.initInputs(a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statesChanged",{get:function(){for(var n=[],a=0;a<this.instance.stateChangedCount();a++)n.push(this.instance.stateChangedNameByIndex(a));return n},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.instance.advance(n)},o.prototype.initInputs=function(n){for(var a=0;a<this.instance.inputCount();a++){var p=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(p,n))}},o.prototype.mapRuntimeInput=function(n,a){if(n.type===a.SMIInput.bool)return new yt(mt.Boolean,n.asBool());if(n.type===a.SMIInput.number)return new yt(mt.Number,n.asNumber());if(n.type===a.SMIInput.trigger)return new yt(mt.Trigger,n.asTrigger())},o.prototype.cleanup=function(){this.instance.delete()},o}(),Pt=function(){function o(n,a,p,y,b){y===void 0&&(y=[]),b===void 0&&(b=[]),this.runtime=n,this.artboard=a,this.eventManager=p,this.animations=y,this.stateMachines=b}return o.prototype.add=function(n,a,p){if(p===void 0&&(p=!0),n=G(n),n.length===0)this.animations.forEach(function($){return $.playing=a}),this.stateMachines.forEach(function($){return $.playing=a});else{var y=this.animations.map(function($){return $.name}),b=this.stateMachines.map(function($){return $.name});for(var w in n){var A=y.indexOf(n[w]),j=b.indexOf(n[w]);if(A>=0||j>=0)A>=0?this.animations[A].playing=a:this.stateMachines[j].playing=a;else{var _=this.artboard.animationByName(n[w]);if(_){var L=new It(_,this.artboard,this.runtime,a);L.advance(0),L.apply(1),this.animations.push(L)}else{var I=this.artboard.stateMachineByName(n[w]);if(I){var lt=new nt(I,this.runtime,a,this.artboard);this.stateMachines.push(lt)}}}}}return p&&(a?this.eventManager.fire({type:S.Play,data:this.playing}):this.eventManager.fire({type:S.Pause,data:this.paused})),a?this.playing:this.paused},o.prototype.play=function(n){return this.add(n,!0)},o.prototype.pause=function(n){return this.add(n,!1)},o.prototype.scrub=function(n,a){var p=this.animations.filter(function(y){return n.includes(y.name)});return p.forEach(function(y){return y.scrubTo=a}),p.map(function(y){return y.name})},Object.defineProperty(o.prototype,"playing",{get:function(){return this.animations.filter(function(n){return n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paused",{get:function(){return this.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),o.prototype.stop=function(n){var a=this;n=G(n);var p=[];if(n.length===0)p=this.animations.map(function(w){return w.name}).concat(this.stateMachines.map(function(w){return w.name})),this.animations.forEach(function(w){return w.cleanup()}),this.stateMachines.forEach(function(w){return w.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var y=this.animations.filter(function(w){return n.includes(w.name)});y.forEach(function(w){w.cleanup(),a.animations.splice(a.animations.indexOf(w),1)});var b=this.stateMachines.filter(function(w){return n.includes(w.name)});b.forEach(function(w){w.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(w),1)}),p=y.map(function(w){return w.name}).concat(b.map(function(w){return w.name}))}return this.eventManager.fire({type:S.Stop,data:p}),p},Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(n,a){return n||a.playing},!1)||this.stateMachines.reduce(function(n,a){return n||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),o.prototype.atLeastOne=function(n,a){a===void 0&&(a=!0);var p;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([p=this.artboard.animationByIndex(0).name],n,a):this.artboard.stateMachineCount()>0&&this.add([p=this.artboard.stateMachineByIndex(0).name],n,a)),p},o.prototype.handleLooping=function(){for(var n=0,a=this.animations.filter(function(y){return y.playing});n<a.length;n++){var p=a[n];p.loopValue===0&&p.loopCount?(p.loopCount=0,this.stop(p.name)):p.loopValue===1&&p.loopCount?(this.eventManager.fire({type:S.Loop,data:{animation:p.name,type:ft.Loop}}),p.loopCount=0):p.loopValue===2&&p.loopCount>1&&(this.eventManager.fire({type:S.Loop,data:{animation:p.name,type:ft.PingPong}}),p.loopCount=0)}},o.prototype.handleStateChanges=function(){for(var n=[],a=0,p=this.stateMachines.filter(function(b){return b.playing});a<p.length;a++){var y=p[a];n.push.apply(n,y.statesChanged)}n.length>0&&this.eventManager.fire({type:S.StateChange,data:n})},o}(),S;(function(o){o.Load="load",o.LoadError="loaderror",o.Play="play",o.Pause="pause",o.Stop="stop",o.Loop="loop",o.Draw="draw",o.StateChange="statechange"})(S||(S={}));var ft;(function(o){o.OneShot="oneshot",o.Loop="loop",o.PingPong="pingpong"})(ft||(ft={}));var ot=function(){function o(n){n===void 0&&(n=[]),this.listeners=n}return o.prototype.getListeners=function(n){return this.listeners.filter(function(a){return a.type===n})},o.prototype.add=function(n){this.listeners.includes(n)||this.listeners.push(n)},o.prototype.remove=function(n){for(var a=0;a<this.listeners.length;a++){var p=this.listeners[a];if(p.type===n.type&&p.callback===n.callback){this.listeners.splice(a,1);break}}},o.prototype.removeAll=function(n){var a=this;n?this.listeners.filter(function(p){return p.type===n}).forEach(function(p){return a.remove(p)}):this.listeners.splice(0,this.listeners.length)},o.prototype.fire=function(n){var a=this.getListeners(n.type);a.forEach(function(p){return p.callback(n)})},o}(),_t=function(){function o(n){this.eventManager=n,this.queue=[]}return o.prototype.add=function(n){this.queue.push(n)},o.prototype.process=function(){for(;this.queue.length>0;){var n=this.queue.shift();n?.action&&n.action(),n?.event&&this.eventManager.fire(n.event)}},o}(),At=function(){function o(n){var a;this._updateLayout=!0,this.isRendererActive=!0,this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.renderSecondTimer=0,this.canvas=n.canvas,this.src=n.src,this.buffer=n.buffer,this.layout=(a=n.layout)!==null&&a!==void 0?a:new h,this.eventManager=new ot,n.onLoad&&this.on(S.Load,n.onLoad),n.onLoadError&&this.on(S.LoadError,n.onLoadError),n.onPlay&&this.on(S.Play,n.onPlay),n.onPause&&this.on(S.Pause,n.onPause),n.onStop&&this.on(S.Stop,n.onStop),n.onLoop&&this.on(S.Loop,n.onLoop),n.onStateChange&&this.on(S.StateChange,n.onStateChange),n.onload&&!n.onLoad&&this.on(S.Load,n.onload),n.onloaderror&&!n.onLoadError&&this.on(S.LoadError,n.onloaderror),n.onplay&&!n.onPlay&&this.on(S.Play,n.onplay),n.onpause&&!n.onPause&&this.on(S.Pause,n.onpause),n.onstop&&!n.onStop&&this.on(S.Stop,n.onstop),n.onloop&&!n.onLoop&&this.on(S.Loop,n.onloop),n.onstatechange&&!n.onStateChange&&this.on(S.StateChange,n.onstatechange),this.taskQueue=new _t(this.eventManager),this.init({src:this.src,buffer:this.buffer,autoplay:n.autoplay,animations:n.animations,stateMachines:n.stateMachines,artboard:n.artboard,useOffscreenRenderer:n.useOffscreenRenderer})}return o.new=function(n){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new o(n)},o.prototype.init=function(n){var a=this,p=n.src,y=n.buffer,b=n.animations,w=n.stateMachines,A=n.artboard,j=n.autoplay,_=j===void 0?!1:j,L=n.useOffscreenRenderer,I=L===void 0?!1:L;if(this.src=p,this.buffer=y,!this.src&&!this.buffer)throw new Error(o.missingErrorMessage);var lt=G(b),$=G(w);this.loaded=!1,this.readyForPlaying=!1,pt.awaitInstance().then(function(bt){a.runtime=bt,a.renderer=a.runtime.makeRenderer(a.canvas,I),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(A,lt,$,_).then(function(){var st=(a.animator.stateMachines||[]).filter(function(Vt){return Vt.playing}).map(function(Vt){return Vt.instance});a.eventCleanup=(0,J.registerTouchInteractions)({canvas:a.canvas,artboard:a.artboard,stateMachines:st,renderer:a.renderer,rive:a.runtime,fit:a._layout.runtimeFit(a.runtime),alignment:a._layout.runtimeAlignment(a.runtime)})}).catch(function(st){console.error(st)})}).catch(function(bt){console.error(bt)})},o.prototype.initData=function(n,a,p,y){var b;return Lt(this,void 0,void 0,function(){var w,A,j;return rt(this,function(_){switch(_.label){case 0:return this.src?(w=this,[4,Xt(this.src)]):[3,2];case 1:w.buffer=_.sent(),_.label=2;case 2:return A=this,[4,this.runtime.load(new Uint8Array(this.buffer))];case 3:return A.file=_.sent(),this.file?(this.initArtboard(n,a,p,y),this.loaded=!0,this.eventManager.fire({type:S.Load,data:(b=this.src)!==null&&b!==void 0?b:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()]):(j="Problem loading file; may be corrupt!",console.warn(j),this.eventManager.fire({type:S.LoadError,data:j}),[2,Promise.reject(j)])}})})},o.prototype.initArtboard=function(n,a,p,y){var b=n?this.file.artboardByName(n):this.file.defaultArtboard();if(!b){var w="Invalid artboard name or no default artboard";console.warn(w),this.eventManager.fire({type:S.LoadError,data:w});return}if(this.artboard=b,this.artboard.animationCount()<1){var w="Artboard has no animations";throw this.eventManager.fire({type:S.LoadError,data:w}),w}this.animator=new Pt(this.runtime,this.artboard,this.eventManager);var A;a.length>0||p.length>0?(A=a.concat(p),this.animator.add(A,y,!1)):A=[this.animator.atLeastOne(y,!1)],this.taskQueue.add({event:{type:y?S.Play:S.Pause,data:A}})},o.prototype.drawFrame=function(){this.startRendering()},o.prototype.draw=function(n,a){var p=performance.now();this.frameRequestId=null,this.lastRenderTime||(this.lastRenderTime=n),this.renderSecondTimer+=n-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a?.());var y=(n-this.lastRenderTime)/1e3;this.lastRenderTime=n;for(var b=this.animator.animations.filter(function(st){return st.playing||st.needsScrub}).sort(function(st){return st.needsScrub?-1:1}),w=0,A=b;w<A.length;w++){var j=A[w];j.advance(y),j.instance.didLoop&&(j.loopCount+=1),j.apply(1)}for(var _=this.animator.stateMachines.filter(function(st){return st.playing}),L=0,I=_;L<I.length;L++){var lt=I[L];lt.advance(y)}this.artboard.advance(y);var $=this.renderer;$.clear(),$.save(),this.alignRenderer(),this.artboard.draw($),$.restore(),$.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.frameCount++;var bt=performance.now();for(this.frameTimes.push(bt),this.durations.push(bt-p);this.frameTimes[0]<=bt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},o.prototype.alignRenderer=function(){var n=this,a=n.renderer,p=n.runtime,y=n._layout,b=n.artboard;a.align(y.runtimeFit(p),y.runtimeAlignment(p),{minX:y.minX,minY:y.minY,maxX:y.maxX,maxY:y.maxY},b.bounds)},Object.defineProperty(o.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(n,a){return n+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.stopRendering(),this.cleanupInstances(),this.renderer.delete(),this.file.delete()},o.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},o.prototype.play=function(n,a){var p=this;if(n=G(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return p.play(n,a)}});return}this.animator.play(n),this.startRendering()},o.prototype.pause=function(n){var a=this;if(n=G(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(n)}});return}this.animator.pause(n)},o.prototype.scrub=function(n,a){var p=this;if(n=G(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return p.scrub(n,a)}});return}this.animator.scrub(n,a||0),this.drawFrame()},o.prototype.stop=function(n){var a=this;if(n=G(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(n)}});return}this.animator.stop(n)},o.prototype.reset=function(n){var a,p=n?.artboard,y=G(n?.animations),b=G(n?.stateMachines),w=(a=n?.autoplay)!==null&&a!==void 0?a:!1;this.cleanupInstances(),this.initArtboard(p,y,b,w),this.taskQueue.process()},o.prototype.load=function(n){this.stop(),this.init(n)},Object.defineProperty(o.prototype,"layout",{get:function(){return this._layout},set:function(n){this._layout=n,(!n.maxX||!n.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),o.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},o.prototype.resizeDrawingSurfaceToCanvas=function(){if(this.canvas instanceof HTMLCanvasElement&&window){var n=this.canvas.getBoundingClientRect(),a=n.width,p=n.height,y=window.devicePixelRatio||1;this.canvas.width=y*a,this.canvas.height=y*p,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(o.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"animationNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.animationCount();a++)n.push(this.artboard.animationByIndex(a).name);return n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stateMachineNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.stateMachineCount();a++)n.push(this.artboard.stateMachineByIndex(a).name);return n},enumerable:!1,configurable:!0}),o.prototype.stateMachineInputs=function(n){if(this.loaded){var a=this.animator.stateMachines.find(function(p){return p.name===n});return a?.inputs}},Object.defineProperty(o.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),o.prototype.on=function(n,a){this.eventManager.add({type:n,callback:a})},o.prototype.unsubscribe=function(n,a){this.eventManager.remove({type:n,callback:a})},o.prototype.unsubscribeAll=function(n){this.eventManager.removeAll(n)},o.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},o.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},o.prototype.enableFPSCounter=function(n){this.runtime.enableFPSCounter(n)},o.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(o.prototype,"contents",{get:function(){if(this.loaded){for(var n={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var p=this.file.artboardByIndex(a),y={name:p.name,animations:[],stateMachines:[]},b=0;b<p.animationCount();b++){var w=p.animationByIndex(b);y.animations.push(w.name)}for(var A=0;A<p.stateMachineCount();A++){for(var j=p.stateMachineByIndex(A),_=j.name,L=new this.runtime.StateMachineInstance(j,p),I=[],lt=0;lt<L.inputCount();lt++){var $=L.input(lt);I.push({name:$.name,type:$.type})}y.stateMachines.push({name:_,inputs:I})}n.artboards.push(y)}return n}},enumerable:!1,configurable:!0}),o.missingErrorMessage="Rive source file or data buffer required",o}(),Xt=function(o){return Lt(void 0,void 0,void 0,function(){var n,a,p;return rt(this,function(y){switch(y.label){case 0:return n=new Request(o),[4,fetch(n)];case 1:return a=y.sent(),[4,a.arrayBuffer()];case 2:return p=y.sent(),[2,p]}})})},G=function(o){return typeof o=="string"?[o]:o instanceof Array?o:[]},vt={EventManager:ot,TaskQueueManager:_t}})(),Dt})()})});var Oe=kn(sn(),1),xe=class{constructor(V){this.item=V,this.create()}create(){this.cnv=document.createElement("canvas"),this.item.appendChild(this.cnv);let{src:V,machines:Y}=this.item.dataset;this.rv=new Oe.default.Rive({src:V,canvas:this.cnv,autoplay:!0,fit:Oe.default.Fit.cover,onLoad:this.loaded.bind(this),stateMachines:Y})}loaded(){this.rv.resizeDrawingSurfaceToCanvas()}},Bn=[...document.querySelectorAll("[data-rive]")];Dn();window.rive=Bn.map(Z=>new xe(Z));function Dn(){let Z=document.createElement("style"),V=`
       [data-rive] > canvas {
        // border: 1px solid red;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
      }
    `;Z.textContent=V,document.head.append(Z)}})();
